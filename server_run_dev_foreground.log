
> rest-express@1.0.0 dev
> NODE_ENV=development tsx server/index.ts

Blockchain data loaded from file
Genesis wallet initialized: PVX_1295b5490224b2eb64e9724dc091795a
[BACKEND LIFECYCLE] Stage 1: .env loaded. Raw process.env.PORT: undefined
[BACKEND LIFECYCLE] Stage 2: App initialized. Attempting to use PORT: 5000
[BACKEND LIFECYCLE] Stage 3: Core middleware (trust proxy, cors, json, urlencoded) added.
[BACKEND LIFECYCLE] Wallet routes /api/wallet mounted.
[BACKEND LIFECYCLE] Stage 4: /api/ping route added.
[BACKEND LIFECYCLE] Stage 9: Calling startServer function...
[BACKEND LIFECYCLE] Stage 5: Starting server initialization process...
✅ [WEBSOCKET] WebSocket server initialized on /ws path and assigned to global scope
[BACKEND LIFECYCLE] Stage 5a: Checking database connection...
[BACKEND DEVELOPMENT] Skipping initial database connection check for Neon/wss error isolation.
[BACKEND WARNING] Database connection initially reported as not available or check skipped (dev mode). Falling back to in-memory/service-level connections.
[BACKEND LIFECYCLE] Stage 6: Initializing PVX blockchain...
Blockchain initialized and running
[BACKEND LIFECYCLE] Stage 6a: Connected to PVX blockchain successfully
[BACKEND LIFECYCLE] Stage 7: Mounting feature API routes...
[BACKEND LIFECYCLE] Stage 7a: Feature routes mounted successfully.
[BACKEND LIFECYCLE] Stage 7b: Error handling middleware added.
[BACKEND LIFECYCLE] Stage 7c: API 404 handling middleware added.
[BACKEND LIFECYCLE] Stage 8: Setting up Vite for development...
❌ Failed to initialize staking pools: Error: connect ECONNREFUSED 127.0.0.1:5432
    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16) {
  errno: -111,
  code: 'ECONNREFUSED',
  syscall: 'connect',
  address: '127.0.0.1',
  port: 5432
}
✅ [BACKEND ONLINE] Server successfully listening on port 5000
   Test Ping: http://localhost:5000/api/ping
   Wallet Create (POST): http://localhost:5000/api/wallet/create
[walletDao] Attempting to save wallet: {
  address: 'PVX_qidaqabendpublickey',
  publicKeyOmitted: '...',
  salt: 'f670570de68fc322261b8e37902aff70'
}
[walletDao] Error saving wallet: Error: connect ECONNREFUSED 127.0.0.1:5432
    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)
    at cachedError (file:///app/node_modules/postgres/src/query.js:170:23)
    at new Query (file:///app/node_modules/postgres/src/query.js:36:24)
    at sql (file:///app/node_modules/postgres/src/index.js:112:11)
    at createWallet (/app/server/database/walletDao.ts:20:26) {
  errno: -111,
  code: 'ECONNREFUSED',
  syscall: 'connect',
  address: '127.0.0.1',
  port: 5432
}
Wallet creation error: Error: connect ECONNREFUSED 127.0.0.1:5432
    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)
    at cachedError (file:///app/node_modules/postgres/src/query.js:170:23)
    at new Query (file:///app/node_modules/postgres/src/query.js:36:24)
    at sql (file:///app/node_modules/postgres/src/index.js:112:11)
    at createWallet (/app/server/database/walletDao.ts:20:26) {
  errno: -111,
  code: 'ECONNREFUSED',
  syscall: 'connect',
  address: '127.0.0.1',
  port: 5432
}
❌ [BACKEND GLOBAL ERROR HANDLER] Error: connect ECONNREFUSED 127.0.0.1:5432
    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)
    at cachedError (file:///app/node_modules/postgres/src/query.js:170:23)
    at new Query (file:///app/node_modules/postgres/src/query.js:36:24)
    at sql (file:///app/node_modules/postgres/src/index.js:112:11)
    at createWallet (/app/server/database/walletDao.ts:20:26)
